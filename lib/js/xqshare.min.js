(function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t()):"function"==typeof define&&define.cmd?define(function(e,i,n){n.exports=t()}):e.XqShare=t()})(this,function(){function e(e={el:"#share",type:"default",url:""}){if(this.options={...e},!this.options.el)throw new Error("XqShare Error: el is must a dom selector!");if(!this.options.type)throw new Error("XqShare Error: type is must a type string!");if(-1===["default","pop","slide"].indexOf(this.options.type))throw new Error('XqShare Error: type is must a type "default" or "pop" or "slide"!');this.url=this.options.url||location.origin+location.pathname,this.title=this.options.title||document.title,this.initElem(document.querySelector(this.options.el))}return e.prototype.initElem=function(e){let t=document.createElement("div");t.className="xqshare";let i="https://xqgj.cc/xqcdn/libs/xqshare/";t.innerHTML=`\n        <div class="xqshare-box ${this.options.type}">\n            <div class="xqshare-inner">\n                <div class="xqshare-title"><span>分享预览页面</span><strong>X</strong></div>\n                <span class="xqshare-tip">分享至</span>\n                <ul class="xqshare-ls">\n                    <li data-type="qq"><img data-type="qq" src="${i}img/share_qq.png" alt="qq"\n                            title="qq"><span data-type="qq">qq</span></li>\n                    <li data-type="qzone"><img data-type="qzone" src="${i}img/share_qzone.png" alt="qq空间"\n                            title="qq空间"><span data-type="qzone">空间</span></li>\n                    <li data-type="weibo"><img data-type="weibo" src="${i}img/share_weibo.png" alt="微博"\n                            title="微博"><span data-type="weibo">微博</span></li>\n                    <li data-type="douban"><img data-type="douban" src="${i}img/share_douban.png" alt="豆瓣"\n                            title="豆瓣"><span data-type="douban">豆瓣</span></li>\n                    <li data-type="tieba"><img data-type="tieba" src="${i}img/share_tieba.png" alt="贴吧"\n                            title="贴吧"><span data-type="tieba">贴吧</span></li>\n                </ul>\n                <div class="xqshare-urls">\n                    <p><span>预览地址</span><input id="previewUrl" type="text" disabled="true"><small id="copyUrl">复制</small></p>\n                    <p><span>嵌入代码</span><input id="iframeUrl" type="text" disabled="true"><input type="hidden" id="iframe-url"\n                            value=""><small  id="copyIframe">复制</small></p>\n                </div>\n            </div>\n        </div>\n        `,e?e.appendChild(t):document.documentElement.appendChild(t),this.addEvent()},e.prototype.addEvent=function(){let e=document.querySelectorAll(this.options.el+" .xqshare-ls li");for(const t of e)t.addEventListener("click",()=>{let e=window.event||event,t=e.target.dataset.type;this.share(t,this.url,this.title)},!1);if("pop"==this.options.type){let e=document.querySelector(this.options.el+" .xqshare-title strong"),t=document.querySelector(this.options.el+" #previewUrl"),i=document.querySelector(this.options.el+" #iframeUrl"),n=document.querySelector(this.options.el+" #copyUrl"),o=document.querySelector(this.options.el+" #copyIframe");t.value=this.url,i.value=`<iframe src='${this.url}' frameborder=0></iframe>`,e.addEventListener("click",()=>{this.hide()}),n.addEventListener("click",()=>{this.copy(this.options.el+" #previewUrl")}),o.addEventListener("click",()=>{this.copy(this.options.el+" #iframeUrl")})}if("slide"==this.options.type){let e=document.querySelector(this.options.el+" .xqshare-tip"),t=document.querySelector(this.options.el+" .slide");e.addEventListener("click",()=>{t.classList.toggle("active")})}},e.prototype.show=function(){if("pop"!=this.options.type)return;let e=document.querySelector(this.options.el+" .xqshare-box");e.classList.add("active")},e.prototype.hide=function(){if("pop"!=this.options.type)return;let e=document.querySelector(this.options.el+" .xqshare-box");e.classList.remove("active")},e.prototype.copy=function(e){let t=document.querySelector(e).value;if(!t)return;let i=document.createElement("input");return i.value=t,document.body.appendChild(i),i.select(),document.execCommand("Copy"),document.body.removeChild(i),alert("复制成功！"),!0},e.prototype.share=function(e,t,i,n){let o={qq:function(e,t){return`https://connect.qq.com/widget/shareqq/iframe_index.html?url=${e}&title=${t}`},qzone:function(e,t){return`http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${e}&title=${t}&site=${e}&desc=${n}`},wechat:function(e,t){return""},weibo:function(e,t){return`http://service.weibo.com/share/share.php?url=${e}&title=${t}&language=zh_cn`},douban:function(e,t){return`http://shuo.douban.com/!service/share?href=${e}&name=${t}`},tieba:function(e,t){return`http://tieba.baidu.com/f/commit/share/openShareApi?title=${t}&url=${e}`}},s=o[e](t,i);window.open(s,"_blank")},e});